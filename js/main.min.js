let onMouseMove;$(document).on("mousedown",(function(){$("html").addClass("clicking")})),$(document).on("mouseup",(function(){$("html").removeClass("clicking")})),$(window).on("focus",(function(){$(document.activeElement).addClass("window-focus")})),$(document).on("keydown",(function(e){"Tab"===e.key&&$("html").removeClass("clicking")}));const addFocusEventListeners=e=>{e.forEach((e=>{$(document).on("focus",e,(function(e){$(e.currentTarget).hasClass("window-focus")?$(e.currentTarget).removeClass("window-focus"):$("html").hasClass("clicking")||$(e.currentTarget).addClass("focused")})),$(document).on("blur",e,(function(e){$(e.currentTarget).removeClass("focused")})),$(document).on("mousedown",e,(function(e){$(e.currentTarget).removeClass("focused")}))}))};debounce=(e,n)=>{let t;return function(){t&&clearTimeout(t),t=setTimeout((()=>{e.apply(this,arguments),clearTimeout(t)}),n)}};class PerfectSB{constructor(e){this.item=e,this.el=null}init(){this.el=new PerfectScrollbar(this.item[0])}update(){this.el.update()}destroy(){this.el.destroy()}}addFocusEventListeners([".input-field input",".select-field .select2-selection","button","a"]);let vh=.01*window.innerHeight;const onResize=()=>{let e=.01*window.innerHeight;$("html").css("--vh",`${e}px`)};$("html").css("--vh",`${vh}px`),$(window).on("resize",debounce(onResize,200));const citySearchList=new PerfectSB($(".modal__city-list"));$("[data-fancybox]").fancybox({touch:!1,autoFocus:!1,backFocus:!1,afterShow:function(){new PerfectSB($(".fancybox-slide")).init(),$(this.src).find(".modal__city-list").length&&(citySearchList.el?citySearchList.update():citySearchList.init()),setTimeout((()=>{$(this.src+".fancybox-content").parent().addClass("perfectScrollbar-init")}),100)},afterClose:function(){$(this.src+".fancybox-content").parent().removeClass("perfectScrollbar-init")}});const getOptions=e=>{const n={};return e.is("[data-search]")||(n.minimumResultsForSearch=1/0),n},initSelect=e=>{const n=getOptions(e);""!==e.find("option").eq(0).val()&&e.is("[data-empty]")&&e.prepend("<option hidden disabled></option>").val(""),e.is("[data-empty]")&&(n.dropdownCssClass="select2-dropdown-first-empty"),e.select2(n)};$(".select-field select").each(((e,n)=>{initSelect($(n)),$(n).on("select2:select",(function(){$(this).attr("data-selected","")}))})),$(window).on("load",(function(){const e=$('a[href^="#"]');e.on("click",(function(e){e.preventDefault();const n=$(this).attr("href").substring(1),t=$(`[data-id='${n}']`);t.length&&(e=>{$("html,body").animate({scrollTop:e.offset().top},"slow")})(t)}))})),$(document).on("click",".article-card",(function(e){$(this).find(".article-card__link").length&&($(e.target).closest(".article-card__tag-link").length||(window.location.href=$(this).find(".article-card__link").attr("href")))})),$(window).on("load",(function(){$(this).trigger("scroll")})),$(window).on("resize",(function(){$(this).trigger("scroll")}));const $mapPlacesFragment=$(document.createDocumentFragment());try{companyMapBranches.forEach((e=>{const n=$("#map-place").prop("content"),t=$(n).find(".company-map__place").clone();t.css({left:`${e.x}%`,bottom:`${e.y}%`}),t.find(".company-map__popup-city").text(e.name),t.find('.company-map__popup-label:contains("Адрес")').next().text(e.address);const i=t.find('.company-map__popup-label:contains("Телефон")').next();i.children().html(e.telephone),i.children().attr("href",`tel:${e.telephone.split("-").join("").split(" ").join("").split("&nbsp;").join("")}`);const s=t.find('.company-map__popup-label:contains("Почта")').next();s.children().html(e.email),s.children().attr("href",`mailto:${e.email}`),$mapPlacesFragment.append(t),$(".company-map__places").append($mapPlacesFragment)}))}catch{console.log("catch")}$(document).on("click",".company-map__pin-btn",(function(){$(this).parent().hasClass("opened")?$(this).parent().removeClass("opened"):($(".company-map__place").removeClass("opened"),$(this).parent().addClass("opened"))})),$(document).on("click",(function(e){$(e.target).closest(".company-map__place").length||$(".company-map__place").removeClass("opened")})),$(document).on("click",".company-map__popup-close",(function(){$(this).parents(".company-map__place").removeClass("opened")}));const headerMenuMobile=new PerfectSB($(".header__menu-mobile"));$(document).on("click",".header__menu-button",(function(){$(this).parents(".header").toggleClass("opened"),$(this).parents(".header").hasClass("opened")?setTimeout((()=>{headerMenuMobile.init()}),500):headerMenuMobile.destroy()})),$(window).on("load",(function(){$(".input-field input").each(((e,n)=>{""!==$(n).val().trim()&&$(n).parents(".input-field").addClass("active")}))})),$(document).on("focus",".input-field input",(function(e){$(e.currentTarget).parents(".input-field").addClass("active")})),$(document).on("blur",".input-field input",(function(e){""===$(e.currentTarget).val().trim()&&($(e.currentTarget).val(""),$(e.currentTarget).parents(".input-field").removeClass("active"))})),$(document).on("input",".input-field.is--search input",(function(e){""!==$(e.currentTarget).val().trim()?$(e.currentTarget).nextAll(".input-field__clear-button").show():$(e.currentTarget).nextAll(".input-field__clear-button").hide()})),$(document).on("click",".input-field__clear-button",(function(e){const n=$(e.currentTarget);n.prevAll("input").val(""),n.hide()}));class CityModal{constructor(){this.el=$("#city-select")}onInput(e){$(document).on("input","#city-select .input-field input",debounce((n=>{e(this.el.find(".input-field input").val())}),500))}onSelect(e){$(document).on("click","#city-select .modal__city-link",(n=>{$(n.target).hasClass("active")||e($(n.target).text())}))}onClear(e){$(document).on("click","#city-select .input-field__clear-button",(n=>{e()}))}}const cityModal=new CityModal;if($(".page-main").length&&$(".main-slider").length){const e=$(".main-slider").outerHeight();$(document).on("scroll",(function(){$(".main-slider").offset().top+e-$(document).scrollTop()<0?$(".header").addClass("is--visible"):$(".header").removeClass("is--visible")}))}const mainSlider=new Swiper(".main-slider__slides",{centeredSlides:!0,autoplay:{delay:+$(".main-slider").attr("data-speed"),disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".main-slider .main-slider__progress",clickable:!0},navigation:{nextEl:".main-slider .main-slider__control--next",prevEl:".main-slider .main-slider__control--prev"},on:{autoplayTimeLeft(e,n,t){const i=Math.round(1e4*(1-t))/100,s=`\n        linear-gradient(to right, #151515, #151515 ${i}%, #F4F4F8 ${i}%, #F4F4F8)\n      `;$(".main-slider .main-slider__progress span").eq(this.activeIndex).css("background",s)},slideChange(){$(".main-slider .main-slider__progress span").css("background",""),$(".main-slider .main-slider__progress span").removeClass("is--passed"),$(".main-slider .main-slider__progress span").slice(0,this.activeIndex).addClass("is--passed")}}}),mainNavSliderMobile=new Swiper(".main-slider--mobile .main-slider__nav",{slidesPerView:"auto",pagination:{el:".main-slider--mobile .main-slider__nav .main-slider__progressbar",type:"progressbar"}}),mainSliderMobile=new Swiper(".main-slider__mobile-slides",{slidesPerView:"auto",pagination:{el:".main-slider__mobile-slides .main-slider__progressbar",type:"progressbar"}}),searchMainPS=new PerfectSB($("#search-main").parent());class MainSearchModal{constructor(){this.addEventListeners()}openModal(){$("#search-main").addClass("is--opened"),$("#search-main").parent().addClass("is--opened"),$(".modal-custom__overlay").eq(0).addClass("is--visible"),$(".header").addClass("is--hidden"),$(".modal__search-main-result-list")[0].scrollTop=0,setTimeout((()=>{searchMainPS.init()}),500)}closeModal(){$("#search-main").removeClass("is--opened"),$("#search-main").parent().removeClass("is--opened"),$(".modal-custom__overlay").eq(0).removeClass("is--visible"),$(".header").removeClass("is--hidden"),$("#search-main").parent().scrollTop(0),searchMainPS.destroy()}onInput(e){$(document).on("input","#search-main .input-field input",debounce((n=>{e($(n.target).val())}),500))}onClear(e){$(document).on("click","#search-main .input-field__clear-button",(n=>{e()}))}addEventListeners(){$(".header__search-button").on("click",(e=>{e.preventDefault(),this.openModal()})),$(".modal__search-main-close").on("click",this.closeModal),$(".modal-custom").on("click",(e=>{$(e.target).closest("#search-main").length||this.closeModal()}))}}const mainSearchModal=new MainSearchModal,newsSlider=new Swiper(".news-articles__slides",{slidesPerView:"auto",pagination:{el:".news-articles .main-slider__progressbar",type:"progressbar"},on:{lock(){$(this.el).removeClass("with-scroll-indicator")},unlock(){$(this.el).addClass("with-scroll-indicator")}}}),objectsSlider=new Swiper(".objects-slider__slides",{centeredSlides:!0,autoplay:{delay:+$(".objects-slider").attr("data-speed"),disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".objects-slider .main-slider__progress",clickable:!0},navigation:{nextEl:".objects-slider .main-slider__control--next",prevEl:".objects-slider .main-slider__control--prev"},on:{autoplayTimeLeft(e,n,t){const i=Math.round(1e4*(1-t))/100,s=`\n        linear-gradient(to right, #151515, #151515 ${i}%, #F4F4F8 ${i}%, #F4F4F8)\n      `;$(".objects-slider .main-slider__progress span").eq(this.activeIndex).css("background",s)},slideChange(){$(".objects-slider .main-slider__progress span").css("background",""),$(".objects-slider .main-slider__progress span").removeClass("is--passed"),$(".objects-slider .main-slider__progress span").slice(0,this.activeIndex).addClass("is--passed")}}});
//# sourceMappingURL=main.min.js.map
